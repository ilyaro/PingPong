version: "3.8"
services:
  ping:
    image: gfish/pingpong
    environment:
      - PARTNER=pong
      - PYTHONUNBUFFERED=1
    build:
      context: .
    ports:
      - ${outport1}:${inport}
    hostname: 'ping'
  pong:
    image: gfish/pingpong
    environment:
      - PARTNER=ping
      - PYTHONUNBUFFERED=1
    ports:
      - ${outport2}:${inport}
    hostname: 'pong'